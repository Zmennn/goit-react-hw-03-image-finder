{"version":3,"sources":["components/style.module.css","components/SearchBar.jsx","components/Button.jsx","components/ImageGallery.jsx","components/ImageGalleryItem.jsx","components/Modal.jsx","components/request.js","App.js","index.js"],"names":["module","exports","SearchBar","state","text","placeholder","handleInput","event","setState","target","value","onSubmit","preventDefault","trim","props","handleSubmit","className","style","searchCont","this","input","type","onChange","iconCont","onClick","icon","Component","Button","handleLoadMore","buttonCont","ImageGallery","dataArray","page","status","showModal","modalUrl","searchRequest","toggleModal","prev","toggleModalData","e","gettingLink","prevState","prevProps","document","querySelector","clientHeight","a","pos","request","then","res","data","hits","length","toast","warn","catch","window","scrollTo","top","behavior","err","console","log","modalId","id","obj","find","el","toString","largeImageURL","error","spinContainer","color","height","width","src","modalImg","alt","gallery","ImageGalleryItem","map","photoCard","photoImg","webformatURL","modalRoot","Modal","handleKeyDown","code","handleBackdropClick","ev","currentTarget","addEventListener","removeEventListener","createPortal","overlay","modalContainer","children","closeButton","url","axios","get","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4414c470.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchCont\":\"style_searchCont__2j2dc\",\"buttonCont\":\"style_buttonCont__22LaX\",\"input\":\"style_input__28PDI\",\"iconCont\":\"style_iconCont__3_cYD\",\"icon\":\"style_icon__1gk02\",\"gallery\":\"style_gallery__1RYzf\",\"photoCard\":\"style_photoCard__2pRd6\",\"photoImg\":\"style_photoImg__3DTbp\",\"overlay\":\"style_overlay__g04iX\",\"closeButton\":\"style_closeButton__3_VoY\",\"modalContainer\":\"style_modalContainer__1j5Ao\",\"modalImg\":\"style_modalImg__FlakY\",\"spinContainer\":\"style_spinContainer__2aeDd\"};","\r\nimport { Component } from \"react\";\r\nimport style from \"./style.module.css\";\r\nimport { BiSearchAlt } from \"react-icons/bi\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n\r\n class SearchBar extends Component{\r\n\r\n     state = {\r\n         text: \"\",\r\n         placeholder:\"What to search?\"\r\n     }\r\n\r\n     handleInput = (event) => {\r\n         this.setState({\r\n           text:event.target.value\r\n         })\r\n     }\r\n\r\n     onSubmit=(event) => {\r\n                event.preventDefault();\r\n                if (this.state.text.trim() !== \"\") { \r\n                this.props.handleSubmit(this.state.text.trim());\r\n                // После сабмита сделаем текст поискового запроса плейсхолдером, мне кажеться это прикольно,\r\n                // будет видно что мы искали, и совсем не будет мешать новому поиску)\r\n                this.setState({ placeholder: this.state.text, text: \"\" })\r\n                } else {\r\n                    this.setState({placeholder:\"What to search?\"})\r\n            }\r\n            }\r\n\r\n\r\nrender(){\r\n    return<>\r\n        <div className={style.searchCont}>\r\n            <form onSubmit={this.onSubmit}>\r\n                \r\n                \r\n                <input\r\n                \r\n                className={style.input}\r\n                type=\"text\"\r\n                value={this.state.text}\r\n                placeholder={this.state.placeholder}\r\n                onChange={this.handleInput }\r\n                />\r\n                <div className={style.iconCont}\r\n                    // type=\"button\"\r\n                    onClick={this.onSubmit}\r\n                >\r\n                                   \r\n                    <BiSearchAlt className={style.icon}/>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </>\r\n};\r\n}\r\n\r\nexport { SearchBar }\r\n\r\nSearchBar.propTypes = {\r\n    searchRequest:PropTypes.func\r\n}\r\n\r\n\r\n\r\n","import style from \"./style.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport function Button({handleLoadMore}) {\r\n    return<>\r\n        <div className={style.buttonCont}>\r\n            <button\r\n                className={style.input}\r\n                type=\"button\"\r\n                onClick={handleLoadMore}\r\n                >Load more</button>\r\n        </div>\r\n        </>\r\n}\r\n\r\nButton.propTypes = {\r\n    searchRequest:PropTypes.func\r\n}","import { Component } from \"react\";\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport style from \"./style.module.css\";\r\nimport {SearchBar, Button, ImageGalleryItem, Modal, request } from \"./index\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\n\r\nclass ImageGallery extends Component{\r\n\r\n  state = {\r\n        dataArray: [],\r\n        page: 1,\r\n        status: \"idle\",\r\n        showModal: false,\r\n        modalUrl: \"\",\r\n        searchRequest:\"\"\r\n    }\r\n\r\n  getSnapshotBeforeUpdate(prevProps, prevState) { return document.querySelector(\"body\").clientHeight }\r\n  // \r\n\r\n   componentDidUpdate( a,prevState,pos) {\r\n        const { state } = this;\r\n\r\n     if (prevState.searchRequest !== state.searchRequest) {\r\n           this.setState({status:\"pending\"})\r\n          \r\n       request(state.page, state.searchRequest)\r\n              .then((res) => {\r\n               if (res.data.hits.length < 1) {\r\n                 toast.warn(\"Check your request, no data received\");\r\n                 this.setState({ status: \"idle\" });\r\n               }else{this.setState({\r\n                  dataArray: res.data.hits,\r\n                  status:\"resolved\"\r\n                    })};})\r\n               .catch(() => this.setState({ status: \"reject\" }))\r\n           \r\n       } else if (prevState.page !== state.page) {\r\n           this.setState({status:\"pending\"})\r\n           \r\n           request(state.page, state.searchRequest)\r\n          .then((res) => {\r\n           if (res.data.hits.length < 1) {\r\n             toast.warn(\"These are all pictures for this request\");\r\n             this.setState({status:\"idle\"})\r\n          } else {\r\n             this.setState((prevState) => ({\r\n             dataArray: [...prevState.dataArray, ...res.data.hits],\r\n             status:\"resolved\"\r\n                })); \r\n                    \r\n             window.scrollTo({\r\n                top: pos-35,\r\n                behavior: \"smooth\"\r\n                     });            \r\n                }})\r\n             .catch((err) => {\r\n               this.setState({ status: \"reject\" });\r\n               console.log(err)\r\n             })      \r\n    }\r\n  } \r\n\r\n  toggleModal = () => {\r\n    this.setState((prev) => ({\r\n    showModal: !prev.showModal,\r\n    status:!prev.showModal?\"idle\":\"resolved\"\r\n       }))}\r\n  \r\n  \r\n  toggleModalData = (e) => {    \r\n      this.setState((prev) => ({\r\n      showModal: !prev.showModal,\r\n      modalUrl: this.gettingLink(prev,e),\r\n      status:!prev.showModal?\"idle\":\"resolved\"       \r\n        }))}\r\n  \r\n  gettingLink(prev,e) {\r\n    const modalId=e.target.id;\r\n    const obj = prev.dataArray.find((el) => el.id.toString() === modalId)\r\n    if(obj){return obj.largeImageURL}   \r\n       };\r\n\r\n  handleLoadMore = () => this.setState((prevState) => ({\r\n    page: prevState.page + 1\r\n      }));\r\n  \r\n\r\n  handleSubmit = (text) => {\r\n    this.setState({ page: 1,searchRequest: text });\r\n       };\r\n\r\n\r\n\r\n\r\n  render() {\r\n    const { state, handleLoadMore, toggleModal, toggleModalData, handleSubmit } = this\r\n    \r\n    return <>\r\n      {state.status === \"reject\" && toast.error(\"unknown error, check connection\")}\r\n\r\n      {state.status === \"pending\" && (\r\n        <div  className={style.spinContainer}>\r\n            <Loader type=\"Circles\" color=\"#00BFFF\" height={120} width={120} />\r\n        </div>)\r\n           }\r\n\r\n      {state.showModal &&\r\n        <Modal\r\n          toggleModal={toggleModal}>\r\n          <img src={state.modalUrl} className={style.modalImg} alt=\"\" />             \r\n        </Modal>}\r\n          \r\n      <SearchBar handleSubmit={handleSubmit} />\r\n\r\n      {!state.showModal &&\r\n        <ul className={style.gallery}>\r\n            <ImageGalleryItem\r\n            dataArray={state.dataArray}\r\n            toggleModalData={toggleModalData}\r\n              />\r\n        </ul>}\r\n         \r\n      {state.status === \"resolved\" &&\r\n        (<Button\r\n          handleLoadMore={handleLoadMore} />)}\r\n      \r\n        </>\r\n    }\r\n}\r\n\r\n\r\nexport { ImageGallery }\r\n","import style from \"./style.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport  function ImageGalleryItem({ dataArray, toggleModalData }) {\r\n  \r\n return dataArray.map(el => \r\n    (       \r\n    <li className={style.photoCard} key={el.id} id={el.id}  >\r\n     <img\r\n       onClick={(e) => toggleModalData(e)}\r\n       className={style.photoImg}\r\n       src={el.webformatURL} alt=\"\"\r\n       id={el.id}\r\n     />\r\n    </li>\r\n  )\r\n  )\r\n}\r\n  \r\nImageGalleryItem.propTypes = {\r\n  dataArray: PropTypes.array.isRequired,\r\n  toggleModalData:PropTypes.func.isRequired\r\n}\r\n\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport style from \"./style.module.css\"\r\n\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\nexport class Modal extends Component {\r\n\r\n    handleKeyDown=(e) => {\r\n        if (e.code === \"Escape\") { this.props.toggleModal() }\r\n        \r\n        }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('keydown',this.handleKeyDown )\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown',this.handleKeyDown )\r\n    }\r\n\r\n\r\n    handleBackdropClick = (ev) => {\r\n        if (ev.target === ev.currentTarget) {\r\n        this.props.toggleModal()\r\n    } }\r\n    \r\n    render(){\r\n        return createPortal(\r\n            <div\r\n                className={style.overlay}\r\n                onClick={this.handleBackdropClick}\r\n            >\r\n            <div className={style.modalContainer}>\r\n            {this.props.children}\r\n                </div>\r\n                <button type=\"button\" onClick={this.props.toggleModal} className={style.closeButton}>Close</button>\r\n        </div>,modalRoot     \r\n    )  }\r\n}\r\n\r\n\r\n","import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst KEY = \"23012527-abace86bcdc7661bfd5472938\";\n\nexport function request(page, searchRequest) {\n  const url = `${BASE_URL}?key=${KEY}&per_page=12&page=${page}&q=${searchRequest}`;\n  return axios.get(url);\n}\n","import { ImageGallery } from \"./components/index\";\nimport \"./App.css\";\nimport { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\n\nclass App extends Component {\n  state = {\n\n  };\n\n\n\n  render() {\n\n    return (\n      <>\n        <ImageGallery />\n        <ToastContainer />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n\n"],"sourceRoot":""}
(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{2:function(t,e,a){t.exports={searchCont:"style_searchCont__2j2dc",buttonCont:"style_buttonCont__22LaX",input:"style_input__28PDI",iconCont:"style_iconCont__3_cYD",icon:"style_icon__1gk02",gallery:"style_gallery__1RYzf",photoCard:"style_photoCard__2pRd6",photoImg:"style_photoImg__3DTbp",overlay:"style_overlay__g04iX",closeButton:"style_closeButton__3_VoY",modalContainer:"style_modalContainer__1j5Ao",modalImg:"style_modalImg__FlakY",spinContainer:"style_spinContainer__2aeDd"}},30:function(t,e,a){},72:function(t,e,a){},73:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(9),s=a.n(r),c=(a(30),a(5)),i=a(6),l=a(8),d=a(7),u=a(2),h=a.n(u),p=a(25),j=a(1),g=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={text:"",placeholder:"What to search?"},t.handleInput=function(e){t.setState({text:e.target.value})},t.onSubmit=function(e){e.preventDefault(),""!==t.state.text.trim()?(t.props.handleSubmit(t.state.text.trim()),t.setState({placeholder:t.state.text,text:""})):t.setState({placeholder:"What to search?"})},t}return Object(i.a)(a,[{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:h.a.searchCont,children:Object(j.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(j.jsx)("input",{className:h.a.input,type:"text",value:this.state.text,placeholder:this.state.placeholder,onChange:this.handleInput}),Object(j.jsx)("div",{className:h.a.iconCont,onClick:this.onSubmit,children:Object(j.jsx)(p.a,{className:h.a.icon})})]})})})}}]),a}(n.Component);function b(t){var e=t.handleLoadMore;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:h.a.buttonCont,children:Object(j.jsx)("button",{className:h.a.input,type:"button",onClick:e,children:"Load more"})})})}var m=a(14),f=a(10),y=(a(32),a(33),a(23)),v=a.n(y),O=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={dataArray:[],page:1,status:"idle",showModal:!1,modalUrl:""},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal,status:t.showModal?"resolved":"idle"}}))},t.toggleModalData=function(e){t.setState((function(a){return{showModal:!a.showModal,modalUrl:t.gettingLink(a,e),status:a.showModal?"resolved":"idle"}}))},t.handleLoadMore=function(){return t.setState((function(t){return{page:t.page+1}}))},t}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this,n=this.props,o=this.state;t.searchRequest!==n.searchRequest?(this.setState({status:"pending"}),S(o.page,n.searchRequest).then((function(t){t.data.hits.length<1?(f.b.warn("Check your request, no data received"),a.setState({status:"idle"})):a.setState({dataArray:t.data.hits,status:"resolved"})})).catch((function(t){return a.setState({status:"reject"})}))):e.page!==o.page&&(this.setState({status:"pending"}),S(o.page,n.searchRequest).then((function(t){if(t.data.hits.length<1)f.b.warn("These are all pictures for this request"),a.setState({status:"idle"});else if(a.setState((function(e){return{dataArray:[].concat(Object(m.a)(e.dataArray),Object(m.a)(t.data.hits)),status:"resolved"}})),t.data.hits[0]){var e=document.getElementById(t.data.hits[0].id);setTimeout((function(){return e.scrollIntoView({behavior:"smooth"})}),900)}})).catch((function(t){return a.setState({status:"reject"})})))}},{key:"gettingLink",value:function(t,e){var a=e.target.id,n=t.dataArray.find((function(t){return t.id.toString()===a}));if(n)return n.largeImageURL}},{key:"render",value:function(){var t=this.state,e=this.handleLoadMore,a=this.toggleModal,n=this.toggleModalData;return Object(j.jsxs)(j.Fragment,{children:["reject"===t.status&&f.b.error("unknown error, check connection"),"pending"===t.status&&Object(j.jsx)("div",{className:h.a.spinContainer,children:Object(j.jsx)(v.a,{type:"Circles",color:"#00BFFF",height:120,width:120})}),t.showModal&&Object(j.jsx)(C,{toggleModal:a,children:Object(j.jsx)("img",{src:t.modalUrl,className:h.a.modalImg,alt:""})}),!t.showModal&&Object(j.jsx)("ul",{className:h.a.gallery,children:Object(j.jsx)(_,{dataArray:t.dataArray,toggleModalData:n})}),"resolved"===t.status&&Object(j.jsx)(b,{handleLoadMore:e})]})}}]),a}(n.Component);function _(t){var e=t.dataArray,a=t.toggleModalData;return e.map((function(t){return Object(j.jsx)("li",{className:h.a.photoCard,id:t.id,children:Object(j.jsx)("img",{onClick:function(t){return a(t)},className:h.a.photoImg,src:t.webformatURL,alt:"",id:t.id})},t.id)}))}var x=document.querySelector("#modal-root"),C=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){"Escape"===e.code&&t.props.toggleModal()},t.handleBackdropClick=function(e){e.target===e.currentTarget&&t.props.toggleModal()},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(j.jsxs)("div",{className:h.a.overlay,onClick:this.handleBackdropClick,children:[Object(j.jsx)("div",{className:h.a.modalContainer,children:this.props.children}),Object(j.jsx)("button",{type:"button",onClick:this.props.toggleModal,className:h.a.closeButton,children:"Close"})]}),x)}}]),a}(n.Component),w=a(24),k=a.n(w);function S(t,e){var a="".concat("https://pixabay.com/api/","?key=").concat("23012527-abace86bcdc7661bfd5472938","&per_page=12&page=").concat(t,"&q=").concat(e);return k.a.get(a)}a(72);var M=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={searchText:""},t.handleSubmit=function(e){t.setState({searchText:e})},t}return Object(i.a)(a,[{key:"render",value:function(){var t=this.handleSubmit,e=this.state;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g,{handleSubmit:t}),Object(j.jsx)(O,{searchRequest:e.searchText}),Object(j.jsx)(f.a,{})]})}}]),a}(n.Component),D=M;s.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(D,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.125f708f.chunk.js.map